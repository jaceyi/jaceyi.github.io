<div class="bar">
  <div class="title">
    <a href="/">Jace's Blog</a>
  </div>
  <nav class="nav">
    <div class="item">
      <a href="/">Home</a>
    </div>
    <div class="item">
      <a href="/tags">Tags</a>
    </div>
    <div class="item">
      <a href="/about">About</a>
    </div>
  </nav>
  <div class="mobile-nav">
    <div class="mobile-nav-menu icon">
      <i class="iconfont">&#xe633;</i>
    </div>
    <div class="mobile-nav-box">
      <a href="/">Home</a>
      <a href="/tags">Tags</a>
      <a href="/about">About</a>
    </div>
  </div>
</div>

<script>
  (function (d, w) {
    var $menuIcon = d.querySelector('.mobile-nav-menu');
    var $navBox = d.querySelector('.mobile-nav-box');
    var animationEndCallback = null;
    function hideNavBox() {
      addClass($navBox, 'zoomOut');
      animationEndCallback = function () {
        removeClass($navBox, 'zoomOut');
        $navBox.style.display = 'none';
      }
    }

    $menuIcon.onclick = function (e) {
      e.stopPropagation();
      if ($navBox.style.display === 'block') return hideNavBox();
      $navBox.style.display = 'block';
      addClass($navBox, 'zoomIn');
      animationEndCallback = function () {
        removeClass($navBox, 'zoomIn');
      }
    };

    $navBox.onclick = function (e) {
      e.stopPropagation();
    };

    $navBox.addEventListener('animationend', function (e) {
      animationEndCallback && animationEndCallback();
    }, false);

    d.body.addEventListener('click', function () {
      if ($navBox.style.display === 'block') hideNavBox();
    }, false);
  })(document, window);
</script>
